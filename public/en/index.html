<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Weekly Meal Planner & Shopping List – Free PDF</title>
  <meta name="description" content="Create your weekly meal plan, shopping list, and download everything as PDF – fast, online, free, in any language!">
  <meta name="keywords" content="meal planner, shopping list, weekly menu, pdf meal planner, meal plan kids, menu organizer, meal planner free" />

  <!-- canonical & alternate versions -->
  <link rel="canonical" href="https://meal-planner.ro/en/" />
  <link rel="alternate" hreflang="x-default" href="https://meal-planner.ro/" />
  <link rel="alternate" hreflang="ro" href="https://meal-planner.ro/ro/" />
  <link rel="alternate" hreflang="en" href="https://meal-planner.ro/en/" />
  <link rel="alternate" hreflang="es" href="https://meal-planner.ro/es/" />
  <link rel="alternate" hreflang="fr" href="https://meal-planner.ro/fr/" />
  <link rel="alternate" hreflang="ru" href="https://meal-planner.ro/ru/" />
  <link rel="alternate" hreflang="zh" href="https://meal-planner.ro/zh/" />
  <link rel="alternate" hreflang="ja" href="https://meal-planner.ro/ja/" />
  <link rel="alternate" hreflang="pt" href="https://meal-planner.ro/pt/" />
  <link rel="alternate" hreflang="de" href="https://meal-planner.ro/de/" />
  <link rel="alternate" hreflang="ar" href="https://meal-planner.ro/ar/" />
  <link rel="alternate" hreflang="hi" href="https://meal-planner.ro/hi/" />

  <!-- OG & Twitter for sharing -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Weekly Meal Planner & Shopping List – Free PDF" />
  <meta property="og:description" content="Create your weekly meal plan, shopping list and download as PDF!" />
  <meta property="og:url" content="https://meal-planner.ro/en/" />
  <meta property="og:image" content="https://meal-planner.ro/cover.jpg" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Weekly Meal Planner & Shopping List – Free PDF" />
  <meta name="twitter:description" content="Create your weekly meal plan, shopping list and download as PDF!" />
  <meta name="twitter:url" content="https://meal-planner.ro/en/" />

 <!-- Favicon modern SVG -->
<link rel="icon" type="image/svg+xml" href="/images/favicon.svg">
<!-- Favicon PNG fallback -->
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="192x192" href="/images/web-app-manifest-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="/images/web-app-manifest-512x512.png">
<!-- Favicon clasic pentru browsere vechi -->
<link rel="icon" type="image/x-icon" href="/images/favicon.ico">
<!-- Apple Touch Icon -->
<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<!-- Manifest PWA -->
<link rel="manifest" href="/images/site.webmanifest">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="/public/css/style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
</head>
<body>
  <div class="container py-5" id="pdf-content">
    <!-- Language Switcher -->
    <div class="mb-3 no-print text-end" id="lang-bar">
      <select id="lang-switcher" class="form-select w-auto"></select>
    </div>

    <!-- Header -->
    <div class="card mb-4 text-center">
      <div class="card-header bg-success text-white">
        <h2 class="mb-0" data-i18n="header">Weekly Meal Planner & Shopping List</h2>
      </div>
    </div>
    <div class="seo-paragraph" id="seo-paragraph">
      <p>
        <strong>Online Weekly Meal Planner</strong> – Create your menu for the whole week, save time and money, and enjoy healthy family meals. Our free app lets you write down what you cook daily, automatically generates the shopping list and lets you download everything as PDF.
      </p>
      <p>
        Whether you want to plan meals for kids, follow a balanced diet, or just manage your budget better, this planner helps you stick to the plan and avoid food waste. Everything is fast, online, and you can use the app in any language!
      </p>
      <p>
        Try the free weekly meal planner – simple, useful, and no account needed!
      </p>
    </div>

    <!-- Planner Table -->
    <div class="card mb-4">
      <div class="card-body">
        <table class="table mb-0">
          <thead>
            <tr>
              <th data-i18n="col.day">Day</th>
              <th data-i18n="col.lunch">Lunch (ingredients)</th>
              <th data-i18n="col.dinner">Dinner (ingredients)</th>
            </tr>
          </thead>
          <tbody id="plan-table"></tbody>
        </table>
      </div>
    </div>

    <!-- MESAJ IMPACT ȘI LISTA PENTRU PDF - hidden by default -->
    <div id="pdf-impact-area" style="display: none; text-align:center; margin-bottom:30px;">
      <h2 id="pdf-impact-message" style="color: #198754; font-size: 2rem;">
        Take care of your health and your family’s! Cook with love and enjoy every meal!
      </h2>
      <div id="pdf-list" style="margin-top:30px;"></div>
    </div>

    <!-- Shopping List -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 data-i18n="shoppingList">Shopping List</h5>
        <ul id="shopping-list" class="list-group list-group-flush"></ul>
      </div>
    </div>

    <!-- Buttons -->
    <div class="text-center mb-4 no-print btn-bar">
      <button id="generate-btn" class="btn btn-success me-2" type="button">
        <i class="bi bi-file-earmark-pdf-fill"></i>
        <span data-i18n="btn.generate">Generate PDF</span>
      </button>
      <a id="pay-btn"
         href="https://buy.stripe.com/00w6oHeDjcPEasLcbY3Ru07"
         target="_blank"
         class="btn btn-warning">
        <i class="bi bi-cart-check-fill"></i>
        <span data-i18n="btn.pay">Pay & Download</span>
      </a>
      <div id="payment-status" class="mt-2"></div>
    </div>

    <!-- Email verification for PDF unlimited access -->
    <div class="card mb-4 text-center" id="access-card">
      <div class="card-header bg-primary text-white">
        <span data-i18n="banner.unlock">Already paid? Unlock unlimited PDF downloads</span>
      </div>
      <div class="card-body">
        <input type="email" id="emailInput" class="form-control mb-2" data-i18n-placeholder="input.email" placeholder="Enter your payment email">
        <button id="verifyBtn" class="btn btn-success"><span data-i18n="btn.verify">Verify Email</span></button>
        <div id="result" class="mt-3"></div>
      </div>
    </div>
  </div>
  <!-- App Logic -->
  <script src="/public/js/app.js"></script>

  <!-- Supabase Email Verification Script -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script>
    const supabase = window.supabase.createClient(
      'https://hwbzbidorkwtyvirozho.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh3YnpiaWRvcmt3dHl2aXJvemhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4OTE0ODUsImV4cCI6MjA2NzQ2NzQ4NX0.4bjszL8tRw0tcnWu8BN-Et8eWyerJFNj6U9tGraEwEA'
    );

    document.getElementById('verifyBtn').onclick = async function() {
      const email = document.getElementById('emailInput').value.trim();
      const resultDiv = document.getElementById('result');
      resultDiv.innerText = 'Checking...';

      if (!email) {
        resultDiv.innerHTML = `<span class="text-danger">Please enter your email address!</span>`;
        return;
      }

      // Select ALL tokens for this email
      const { data, error } = await supabase
        .from('tokens')
        .select('*')
        .eq('email', email);

      if (error) {
        resultDiv.innerHTML = `<span class="text-danger">Server error. Please try again.</span>`;
        return;
      }

      // Check if there's any valid (not expired) token
      if (data && data.length > 0) {
        const now = Date.now();
        const valid = data.some(token => !token.expires_at || token.expires_at > now);

        if (valid) {
          resultDiv.innerHTML = `
            <span class="text-success mb-2 d-block">✅ You have access! You can now download unlimited PDFs:</span>
            <button id="paid-generate-pdf" class="btn btn-primary">Download PDF</button>
          `;
          document.getElementById('pay-btn').style.display = 'none';

          setTimeout(() => {
            const generateBtn = document.getElementById('generate-btn');
            const paidBtn = document.getElementById('paid-generate-pdf');
            if (paidBtn && generateBtn) {
              paidBtn.addEventListener('click', function() {
                generateBtn.click();
              });
            }
          }, 0);

        } else {
          resultDiv.innerHTML = `<span class="text-danger">No valid access for this email.</span>`;
        }
      } else {
        resultDiv.innerHTML = `<span class="text-danger">No access found for this email. Please pay first or check your address.</span>`;
      }
    }
    document.getElementById('emailInput').addEventListener('keydown', function(e) {
  if (e.key === 'Enter') {
    e.preventDefault();
    document.getElementById('verifyBtn').click();
  }
});
  </script>
    <!-- Feedback Section -->
<div class="card mb-4" id="feedback-section">
  <div class="card-header bg-info text-white text-center">
    <i class="bi bi-chat-dots"></i>
    <span data-i18n="feedback.header">Trimite feedback rapid</span>
  </div>
  <div class="card-body">
    <form id="feedbackForm">
      <textarea class="form-control mb-2" id="feedbackMsg"
        rows="3"
        data-i18n-placeholder="feedback.placeholder"></textarea>
      <button type="submit" class="btn btn-info" data-i18n="feedback.button">Trimite feedback</button>
      <div id="feedback-status" class="mt-2"></div>
    </form>
    <small class="text-muted d-block mt-2" data-i18n="feedback.note">
      Feedbackul ajunge direct la dezvoltator.
    </small>
  </div>
</div>
</body>
</html>
